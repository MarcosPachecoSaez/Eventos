<app-navbar></app-navbar>

<div class="perfil-container">
  <h2>Mi Perfil</h2>

  <div class="perfil-info">
    <p><strong>Correo:</strong> {{ correo }}</p>

    <p><strong>Nombre:</strong> {{ nombre }}</p>

    <!-- Botón para activar edición -->
    <button (click)="modoEdicion = !modoEdicion">
      {{ modoEdicion ? "Cancelar edición" : "Editar nombre" }}
    </button>

    <!-- Campo editable solo si está en modo edición -->
    <div *ngIf="modoEdicion">
      <label>
        Nuevo nombre:
        <input type="text" [(ngModel)]="nuevoNombre" />
      </label>
      <button (click)="guardarCambios()">Guardar cambios</button>
    </div>

    <label>
      Edad:
      <input type="number" [(ngModel)]="nuevaEdad" />
    </label>

    <button (click)="guardarCambios()">Guardar cambios</button>
  </div>

  <hr />

  <div class="historial-compras">
    <h3>Historial de eventos comprados</h3>

    <div *ngIf="entradas.length === 0">
      <p>No has comprado entradas aún.</p>
    </div>

    <div *ngFor="let ticket of entradas" class="entrada-card">
      <p><strong>Evento:</strong> {{ ticket.eventos.nombre }}</p>
      <p><strong>Fecha:</strong> {{ ticket.eventos.fecha | date }}</p>
      <p><strong>Cantidad:</strong> {{ ticket.cantidad }}</p>
      <p>
        <strong>Total pagado:</strong> ${{
          ticket.eventos.precio * ticket.cantidad
        }}
      </p>
      <hr />
    </div>
  </div>
</div>
